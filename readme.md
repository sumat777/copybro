### Тестовое задание - отчет о выполнении AV 20211128

Код загружен сюда: 

https://github.com/sumat777/copybro

Имеется 2 ветки (branch)

стартовое состояние: master 

результат тестового задания: done 

### Среда выполнения

httpd -v

Server version: Apache/2.4.51 (Win64)

Apache Lounge VS16 Server built:   Oct  7 2021 16:27:02


PHP --version

PHP 8.0.12 (cli) (built: Oct 19 2021 11:21:05) ( ZTS Visual C++ 2019 x64 )

Copyright (c) The PHP Group

Zend Engine v4.0.12, Copyright (c) Zend Technologies


Сервер баз данных

Сервер: localhost via TCP/IP

Тип сервера: MariaDB

Соединение сервера: SSL не используется Документация

Версия сервера: 10.4.12-MariaDB - mariadb.org binary distribution

Версия протокола: 10

Пользователь: root@localhost

Кодировка сервера: UTF-8 Unicode (utf8)


VERSION()

10.4.12-MariaDB


### 1 API

Предварительно следует: 

Обновить БД: copybro-test.sql.zip (там новые данные для теста, также немного изменена структура)

Загрузить в postman обновленную коллекцию: collection.json


Все методы использует один и тот же ЕндПоинт: 

http://copybro.localhost/api/


В Хидере есть новый KEY apiname. 

По данному ключу ЕндПоинт различает запросы. 

Возможные варианты значения этого ключа: 

* user.get
* user.update
* notifications.get
* notifications.read

### 2 дизайн из figma

Можно смотреть как это все выглядет по главному урлу: 
http://copybro.localhost/

Сделана только версия для настольных компьютеров. 

Имеется функция распознования, с какого дивайса пришел юзер, и в зависимости рисовать разные решения. 

См файл: 

/js/common.js

what_device: function()

Те девайсы, которые есть у меня распознал корректно. 

retina-экраны 

Здесь попробовал использование вместо: 

hourglass2.png

Использовать: 

hourglass2.svg

Не уверен, что это правильное решение. 

С одной стороны, svg файлы идеальны для retina-экранов (и обычных тоже), но почему-то экспорт из figma дает эти файлы очень больших размеров. 
Пока не вижу хорошего решения. 

К тому же у меня нет retina-экранов. Протестировал имитаторами, вроде ок все смотрится. 

* плавную анимацию появления блоков

Это сделано, но с использованием библиотеки jQuery, которая подгружается с внешнего ресурса: 

js.inumo.ru

Не уверен, что в задании можно использовать jQuery, но вроде как запрета не увидел, поэтому рискнул использовать. 


### Валидация кода 

Не видно явных ошибок PHP и JS, но если проверить валидность кода HTML тут: 

validator.w3.org/nu/

То есть немного ошибок, в основном по причине использования: 

DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"


### Окончание отчета


Ниже само тестовое задание, как оно есть:

###
### Тестовое задание

1 Требуется создать несколько методов API, которые отвечают за вывод и обновление информации о пользователе:

1.1 метод API получения информации о текущем пользователе

* Название `GET /user.get`
* Выводим всю информацию из метода `User::user_info`.

1.2 Метод API обновления информации по текущему пользователю

* Название `POST /user.update`
* Content-Type: application/json
* Можно обновлять только поля `first_name`, `last_name`, `middle_name`, `email` и `phone`
* Если одного из полей нет в запросе - оно не обновляется
* Если в запросе нет ни одного из полей - выводим ошибку
* Поля `middle_name` и `email` могут быть пустые
* Поля `first_name`, `last_name` и `phone` должны быть непустыми
* Поле `phone` должно содержать 11 цифр и начинаться с 7
* Email должен автоматически переводиться в нижний регистр
* Телефон должен очищаться от нецифровых символов (при вводе `+7-900-000-00-00` телефон должен корректно обновляться)
* При каждом обновлении профиля в базу должна добавлять запись с уведомлением, что информация обновлена

1.3 Метод API получения списка уведомлений пользователя

* Название `GET /notifications.get`
* Возвращает массив уведомлений
* У каждого уведомления должен быть заголовок, описание, дата создания и флаг о статусе прочтения
* При вызове можем отправить опциональный параметр, чтобы получить список только непрочитанных уведомлений

1.4 Метод API чтения списка уведомлений пользователя

* Название `POST /notifications.read`
* Content-Type: application/json
* Параметров нет
* При вызове читает все уведомления пользователя

Общие требования:

* Простой и понятный код, который написан в том же формате, что и другие части проекта;
* Блоки кода структурированы с помощью комментариев

2 Необходимо сверстать верхний заголовок по дизайну из figma (блок начинается от логотипа CopyBro до текста с 3 блоками "Стать инвестором просто"):

https://www.figma.com/file/NzjhPvxCJMcOgfRfudE4Em?node-id=18%3A0

Требования:

* Весь html-код пишется в файле `/partials/home.html`, css в файле `/css/common.css`
* Простая структура блоков и css (в html не должно быть перегруженности стилями)
* Должна поддерживаться полная адаптивность (при любом разрешении должен быть корректный рендеринг)
* Формат кода в html и css должен быть тот же, что и в других частях проекта
* Должны поддерживаться четкие изображения для retina-экранов
* При загрузке страницы добавляем плавную анимацию появления блоков на странице через JavaScript (в js-файле `/js/common.js`, выбор блоков - по своему усмотрению, оптимально 10-20 блоков)

3 Отправка результата

* Требуется дополнить коллекцию postman новыми методами (коллекция в корне проекта)
* Загрузить код в репозиторий в виде 2-х коммитов (стартовое состояние и результат тестового задания)